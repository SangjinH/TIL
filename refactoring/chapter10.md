# Chapter10 조건부 로직 간소화



조건부 로직을 많이 만나는 상황이 생깁니다.
따라서, 해당 부분을 해소하기 위한 코드를 짜는 방법을 소개하겠습니다.

1. 복잡한 조건문은 조건문 분해하기
2. 논리적 조합을 명확하게 다듬는 데는 중복 조건식 통합하기
3. 핵심로직 이전에 무언가를 검사해야할 때는 중첩 조건문을 보호 구문으로 바꾸기 
4. 똑같은 분기 로직이 여러 곳에 등장한다면, 조건부 로직을 다형성으로 바꾸기 


특별히, null을 체크하는데도 조건부 로직이 흔히 쓰입니다. 



### 세 번째, 중첩 조건문을 보호 구문으로 바꾸기 같은 경우에

평소 우리가, `if-else`  구문을 사용할 때, 조건문을 정의하기위해 사용하는 경우가 많지만, 책의 저자는 두 가지 용도가 있다고 설명합니다. 

	1. 참인 경로와 거짓인 경로가 모두 정상 동작으로 이어지는 경우
	2. 한쪽만 정상인 경우

첫 번째의 경우는 if-else 를 사용하는 것이 맞지만,
두 번째의 경우는 **보호구문**으로서의 if 구문을 사용합니다. 

다음은 직원 급여를 계산하는 코드의 예시입니다. 

<img src="/Users/hansangjin/Desktop/스크린샷 2022-10-22 오후 5.08.59.png" alt="스크린샷 2022-10-22 오후 5.08.59" style="zoom:50%;" />

위 코드가 진짜로 의도한 일은 모두 거짓일 때만 동작하기 때문에, 어떤 의도로 동작하는지가 명확히 보이지 않는다.

 위와 같을 경우에는  `보호 구문을 사용`  하면 코드의 의도가 더 잘 드러난다!



<img src="/Users/hansangjin/Desktop/스크린샷 2022-10-22 오후 5.23.27.png" alt="스크린샷 2022-10-22 오후 5.23.27" style="zoom:50%;" />

코드 리팩토링 이후의 코드입니다. 
확실히 if - else - else 를 줄여 어떤 일을 하는지는 명확해진듯 싶습니다.



### 다음은 조건부 로직을 다형성으로 바꾸기 입니다.

사실 이 경우를 공부하고 싶어서 해당 조건문을 다루는 부분을 읽게 됐습니다. 

예시를 알기전, 다형성으로 바꾸고자하는 순서를 먼저 알아보겠습니다!!

> 1. 다형적 동작을 표현하는 클래스를 만들어주고, 적합한 인스턴스를 반환하는 팩토리함수도 만들어줍니다.
> 2. 호출하는 코드에서 팩터리 함수를 사용하게 합니다.
> 3. 조건부 로직 함수를 슈퍼클래스로 옮깁니다.
> 4. 서브클래스 중 하나를 선택합니다. 슈퍼클래스의 조건부 로직 메서드를 오버라이드하고 적절히 수정합니다.
> 5. 같은 방식으로 조건절을 해당 서브클래스에서 메서드로 구현합니다.
> 6. 슈퍼클래스 메서드에는 기본동작 부분만 남기고, 혹시 슈퍼클래스가 추상 클래스여야한다면, 이 메서드를 추상으로 선언하거나 서브클래스에서 처리해야함을 알리는 에러를 던집니다.



####  Before Refactoring

***두 클래스는 다른 곳에 위치함

![image-20221022184845840](/Users/hansangjin/Library/Application Support/typora-user-images/image-20221022184845840.png)

<img src="/Users/hansangjin/Library/Application Support/typora-user-images/image-20221022185024359.png" alt="image-20221022185024359" style="zoom: 50%;" />

---



